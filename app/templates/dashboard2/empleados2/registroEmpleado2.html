<title>Registrar empleado</title>

{% extends "dashboard2/basemenu2.html" %}

{% block title %}Registrar empleado {% endblock %}



{% block sidebar %}{% endblock %}



{% block content %} 
    <main class=" px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h3 class="h3">Registrar empleado</h3>
      </div>

        <!---Formulario-->
        <form name="form-registroEmpleado" id="form-registroEmpleado"  action="{{ url_for('registrarEmpleado') }}" method="POST" class="mt-5" autocomplete="off">
        <div class="row">

          <div class="col-md-6">

          
<div class="form-group row">
  <div class="col-md-6">
              <label for="cedula" class="form-label">Cedula</label>
              <input id="cedula"placeholder="Ej. 12345678" type="text" min="0000001" max="99999999" name="cedula" class="form-control" ondrop="return false;" onpaste="return false;"
                                onkeypress="return event.charCode>=48 && event.charCode<=57" autofocus maxlength="8" 
                                minlength="7" 
                                title="La cedula debe tener entre 7 y 8 d√≠gitos." pattern="[0-9]+{7,9}" required>
    
  </div>
        <div class="col-md-6">  
            <label for="numero" class="form-label">Tel√©fono</label>
              <div class="row">  
                <div class="col-md-4">
                      <select class="form-control" id="prefijo_telefonico" name="prefijo_telefonico">
                          <option value="0414">0414</option>
                          <option value="0424">0424</option>
                          <option value="0412">0412</option>
                          <option value="0416">0416</option>
                          <option value="0426">0426</option>
                      </select>
                  </div>
                  <div class="col-md-8">
                      <input id="numero" placeholder="Ej. 049876543" type="text" min="0000001" max="9999999" name="numero" class="form-control" ondrop="return false;" onpaste="return false;"
                      onkeypress="return event.charCode>=48 && event.charCode<=57" minlength="7" 
                      maxlength="7" 
                      pattern="[0-9]+{7,7}" 
                      title="El n√∫mero debe tener 7 d√≠gitos." required>
                  </div>
              </div>
          </div>

            <div class="col-md-6">
                <label for="nombre" class="form-label mt-1">Nombre</label>
                <input type="text" id="nombre" name="nombre" class="form-control" required>
          </div>
            <div class="col-md-6">
                <label for="apellido" class="form-label mt-1">Apellido</label>
                <input type="text" id="apellido" name="apellido" class="form-control" required>
            </div>




            <div class="col-md-6">
                <label for="tipo" class="form-label">Tipo de empleado</label>
                <select name="tipo" class="form-control" required selected>----Seleccione-----
                  <option value="Administrativo">Administrativo</option>
                  <option value="T√©cnico">T√©cnico</option>
                </select>
            </div>

            

        <div class="grid gap-2 mt-3 mb-3">
            <input type="submit" class="btn btn-primary btn-send" id="sendForm" value="Registrar">
            <button type="button" class="btn btn-danger" id="btnLimpiar">Limpiar</button>

        </div>
      </form>




      <script>

        // Guardar los datos cuando el formulario se env√≠e
        document.getElementById("form-registroEmpleado").addEventListener("submit", function(event) {
          if (!this.checkValidity()) {
                event.preventDefault(); // Det√©n el env√≠o solo si el formulario no es v√°lido
                event.stopPropagation();
            } else {
                this.submit(); // Env√≠a el formulario si es v√°lido
            }
        
            // Guardar datos del formulario en localStorage
            localStorage.setItem("cedula", document.getElementById("cedula").value);
            localStorage.setItem("numero", document.getElementById("numero").value);
            localStorage.setItem("nombre", document.getElementById("nombre").value);
            localStorage.setItem("apellido", document.getElementById("apellido").value);
            localStorage.setItem("tipo", document.getElementById("tipo").value);
        
            
        
            // Validar el formulario
            if (document.getElementById("form-registroEmpleado").checkValidity()) {
                this.submit(); // Solo enviar el formulario si es v√°lido
            } 
        });
        
        
        
        // Cargar los datos desde localStorage si existen
        window.onload = function() {
        
        
            if (localStorage.getItem("cedula")) {
                document.getElementById("cedula").value = localStorage.getItem("cedula");
            }
            if (localStorage.getItem("numero")) {
                document.getElementById("numero").value = localStorage.getItem("numero");
            }
            if (localStorage.getItem("nombre")) {
                document.getElementById("nombre").value = localStorage.getItem("nombre");
            }
            if (localStorage.getItem("apellido")) {
                document.getElementById("apellido").value = localStorage.getItem("apellido");
            }
            if (localStorage.getItem("tipo")) {
                document.getElementById("tipo").value = localStorage.getItem("tipo");
            }
            
        
          
          };
          
          window.addEventListener("beforeunload", function (e) {
            limpiarLocalStorage();
        });
        document.getElementById("btnLimpiar").addEventListener("click", function() {
            document.getElementById("form-registroEmpleado").reset(); // üßπ Limpia todos los campos
            limpiarLocalStorage(); // üßπ Tambi√©n limpia el localStorage
        });
        
        
        </script>



</body>

{% endblock %}
</html>
